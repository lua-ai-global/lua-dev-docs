---
title: "CLI Overview"
description: "Command-line interface for building and deploying AI agents"
---

## Lua AI CLI v3.0.0

Build and deploy AI agents with superpowers

```bash
lua [options] [command]
```

<Note>
**New in v3.0.0 (lua-cli package):**
- 🤖 **LuaAgent** - Unified agent configuration with persona, skills, webhooks, jobs, and processors
- 🪝 **LuaWebhook** - HTTP endpoints for external integrations (Stripe, Shopify, etc.)
- ⏰ **LuaJob** - Scheduled tasks with cron patterns
- 📥 **PreProcessor** - Filter and route messages before they reach your agent
- 📤 **PostProcessor** - Transform and format agent responses
- 🔄 **Jobs API** - Dynamically create scheduled tasks from tools
</Note>

<Note>
**New in v2.6.0 (CLI commands):**
- 🎯 Direct environment access for all commands
- ⌨️ Shell autocomplete support (Bash, Zsh, Fish)
- 🚀 New `lua skills` command for production skill management
- ⚡ New `lua features` command for managing agent capabilities
- ⚡ Faster workflows with `lua push skill`, `lua env production`, etc.
</Note>

### Options

```bash
-V, --version   # Output the version number
-h, --help      # Display help for command
```

### All Commands

| Command | Category | Description |
|---------|----------|-------------|
| `lua auth` | 🔐 Authentication | Manage API keys and authentication |
| `lua init` | 🚀 Project Setup | Initialize a new Lua skill project |
| `lua env` | ⚙️ Configuration | Manage environment variables (sandbox/production) |
| `lua persona` | 🤖 Configuration | Manage agent persona (sandbox/production) |
| `lua features` | ⚡ Configuration | Manage agent capabilities and features |
| `lua resources` | 📚 Configuration | Manage agent knowledge base |
| `lua skills` | 🔧 Development | View and manage skills (sandbox/production) |
| `lua compile` | 📦 Development | Compile skill to deployable format |
| `lua test` | 💬 Testing | Test skill tools interactively |
| `lua chat` | 💬 Testing | Interactive chat with your agent |
| `lua push` | ☁️ Deployment | Push skill or persona version to server |
| `lua deploy` | 🚀 Deployment | Deploy version to production |
| `lua production` | 🚀 Deployment | View and manage production environment |
| `lua channels` | 🔌 Integration | Manage communication channels |
| `lua logs` | 🐛 Debugging | View agent and skill execution logs |
| `lua completion` | ⌨️ Utilities | Generate shell autocomplete scripts |
| `lua admin` | 🛠️ Utilities | Open admin dashboard in browser |
| `lua docs` | 📖 Utilities | Open documentation in browser |

### Quick Examples

```bash
# Authentication & Setup
lua auth configure      # 🔑 Set up your API key
lua init               # 🚀 Initialize a new project

# Configuration (Interactive or Direct)
lua env                # ⚙️ Manage environment variables
lua env sandbox        # 🎯 Direct: manage sandbox .env file
lua env production     # 🎯 Direct: manage production env vars
lua persona            # 🤖 Manage agent persona
lua persona sandbox    # 🎯 Direct: edit sandbox persona
lua persona production # 🎯 Direct: deploy persona version
lua features           # ⚡ Manage agent capabilities (tickets, RAG, etc.)
lua resources          # 📚 Manage knowledge base

# Development
lua skills             # 🔧 View and manage skills
lua skills sandbox     # 🎯 Direct: view local skills
lua skills production  # 🎯 Direct: manage production skills
lua compile            # 📦 Compile your skills
lua test               # 🧪 Test tools interactively
lua chat               # 💬 Start interactive chat

# Deployment (Interactive or Direct)
lua push               # ☁️ Push to server (choose skill/persona)
lua push skill         # 🎯 Direct: push skill
lua push persona       # 🎯 Direct: push persona
lua deploy             # 🚀 Deploy to production

# Integration & Debugging
lua channels           # 🔌 Manage communication channels
lua logs               # 🐛 View execution logs

# Utilities
lua completion bash    # ⌨️ Generate bash autocomplete
lua completion zsh     # ⌨️ Generate zsh autocomplete
lua completion fish    # ⌨️ Generate fish autocomplete
lua admin              # 🛠️ Open admin dashboard
lua docs               # 📖 Open documentation
```

<Note>
**Get help for any command**: `lua [command] --help` or `lua help [command]`

**Documentation**: https://docs.heylua.ai  
**Support**: https://heylua.ai/support
</Note>

## Quick Command Reference

<CardGroup cols={3}>
  <Card title="lua init" icon="plus">
    Initialize new skill project
  </Card>
  <Card title="lua skills" icon="code">
    View and manage skills
  </Card>
  <Card title="lua env" icon="key">
    Manage environment variables
  </Card>
  <Card title="lua persona" icon="user">
    Configure agent personality
  </Card>
  <Card title="lua features" icon="sliders">
    Manage agent capabilities
  </Card>
  <Card title="lua test" icon="flask">
    Test tools interactively
  </Card>
  <Card title="lua chat" icon="comments">
    Interactive chat with your agent
  </Card>
  <Card title="lua push" icon="upload">
    Upload version to server
  </Card>
  <Card title="lua deploy" icon="rocket">
    Deploy to production
  </Card>
  <Card title="lua completion" icon="terminal">
    Shell autocomplete setup
  </Card>
</CardGroup>

## Shell Autocomplete ⚡ NEW

Enable tab completion for all Lua CLI commands and arguments:

<Tabs>
  <Tab title="Bash">
    ```bash
    # One-time setup
    lua completion bash >> ~/.bashrc
    source ~/.bashrc
    
    # Now try:
    lua pu<TAB>      # Completes to: lua push
    lua push <TAB>   # Shows: skill, persona
    lua env <TAB>    # Shows: sandbox, staging, production
    ```
  </Tab>

  <Tab title="Zsh">
    ```bash
    # One-time setup
    lua completion zsh >> ~/.zshrc
    source ~/.zshrc
    
    # Now try:
    lua <TAB>        # Shows all commands
    lua persona <TAB> # Shows: sandbox, staging, production
    ```
  </Tab>

  <Tab title="Fish">
    ```bash
    # One-time setup
    lua completion fish > ~/.config/fish/completions/lua.fish
    
    # Now try:
    lua <TAB>        # Shows all commands with descriptions
    ```
  </Tab>
</Tabs>

<Card title="Learn More" href="/cli/utility-commands#autocomplete" />

## Direct Mode ⚡ NEW

Skip interactive prompts by specifying your target directly:

<Tabs>
  <Tab title="Push Commands">
    ```bash
    # Interactive (old way - still works!)
    lua push
    ? What would you like to push? 
      › skill
        persona
    
    # Direct (new way - faster!)
    lua push skill      # Push skill directly
    lua push persona    # Push persona directly
    ```
  </Tab>

  <Tab title="Environment Commands">
    ```bash
    # Interactive
    lua env
    ? Select environment:
      › Sandbox
        Production
    
    # Direct
    lua env sandbox     # Manage .env file
    lua env production  # Manage API env vars
    lua env staging     # Alias for sandbox
    ```
  </Tab>

  <Tab title="Persona Commands">
    ```bash
    # Interactive
    lua persona
    ? Select environment:
      › Sandbox
        Production
    
    # Direct
    lua persona sandbox     # Edit sandbox persona
    lua persona production  # Deploy persona version
    ```
  </Tab>

  <Tab title="Skills Commands">
    ```bash
    # Interactive
    lua skills
    ? Select environment:
      › Sandbox
        Production
    
    # Direct
    lua skills sandbox     # View local skills
    lua skills production  # Manage production skills
    ```
  </Tab>
</Tabs>

## Command Categories

### Authentication

<Tabs>
  <Tab title="configure">
    Set up API key authentication
    ```bash
    lua auth configure
    ```
    
    Choose between:
    - **Email**: OTP verification
    - **API Key**: Existing key
    
    <Card title="Learn More" href="/cli/authentication" />
  </Tab>

  <Tab title="key">
    Display stored API key
    ```bash
    lua auth key
    ```
    
    Shows key after confirmation prompt
  </Tab>

  <Tab title="logout">
    Delete stored credentials
    ```bash
    lua auth logout
    ```
    
    Removes key from system keychain
  </Tab>
</Tabs>

### Skill Management

<Tabs>
  <Tab title="init">
    Create new skill project
    ```bash
    mkdir my-skill && cd my-skill
    lua init
    ```
    
    Creates:
    - Template project structure
    - 30+ example tools
    - TypeScript configuration
    - `lua.skill.yaml` config
    
    <Card title="Learn More" href="/cli/skill-management#init" />
  </Tab>

  <Tab title="compile">
    Compile TypeScript to JavaScript
    ```bash
    lua compile
    ```
    
    Automatically:
    - Detects all tools
    - Bundles with esbuild
    - Creates deployment artifacts
    - Updates skill IDs
    
    <Card title="Learn More" href="/cli/skill-management#compile" />
  </Tab>

  <Tab title="test">
    Test tools interactively
    ```bash
    lua test
    ```
    
    Features:
    - Select tool from list
    - Dynamic input prompts
    - Secure sandbox execution
    - Detailed error reporting
    
    <Card title="Learn More" href="/cli/skill-management#test" />
  </Tab>

  <Tab title="push">
    Upload version to server
    ```bash
    lua push
    ```
    
    - Compiles code
    - Validates configuration
    - Uploads to server
    - Creates new version
    
    <Card title="Learn More" href="/cli/skill-management#push" />
  </Tab>

  <Tab title="deploy">
    Deploy to production
    ```bash
    lua deploy
    ```
    
    - Lists available versions
    - Shows current version
    - Requires confirmation
    - Immediate deployment
    
    <Card title="Learn More" href="/cli/skill-management#deploy" />
  </Tab>

  <Tab title="chat">
    Interactive chat
    ```bash
    lua chat
    ```
    
    Features:
    - Sandbox or production mode
    - Test conversational flows
    - Skill overrides
    - Persona customization
    
    <Card title="Learn More" href="/cli/chat-command" />
  </Tab>
</Tabs>

## Common Workflows

### New Project Workflow

<Steps>
  <Step title="Authenticate">
    ```bash
    lua auth configure
    ```
  </Step>
  
  <Step title="Initialize">
    ```bash
    mkdir my-skill && cd my-skill
    lua init
    ```
  </Step>
  
  <Step title="Configure Environment">
    ```bash
    lua env sandbox
    ```
    
    Add API keys and configuration to .env file
  </Step>
  
  <Step title="Configure Persona">
    ```bash
    lua persona sandbox
    ```
    
    Define your agent's personality in local file
  </Step>
  
  <Step title="Test Your Agent">
    ```bash
    lua chat
    ```
    
    Interactive chat in sandbox mode
    
    <Note>
    **Optional**: Use `lua test` to test individual tools with specific inputs
    </Note>
  </Step>
  
  <Step title="Deploy">
    ```bash
    lua push
    lua deploy
    ```
  </Step>
</Steps>

### Development Workflow

<Steps>
  <Step title="Configure Environment (if needed)">
    ```bash
    lua env sandbox        # Update local .env
    lua env production     # Update production env vars
    ```
    
    Add any new API keys or configuration needed
  </Step>
  
  <Step title="Update Persona (if needed)">
    ```bash
    lua persona sandbox    # Edit and test locally
    ```
    
    Refine agent personality based on feedback
  </Step>
  
  <Step title="Make Changes">
    Edit your tools in `src/tools/*.ts`
  </Step>
  
  <Step title="Test Your Agent">
    ```bash
    lua chat
    ```
    
    Select sandbox mode to test with local changes
    
    <Note>
    **Pro tip**: Use `lua test` to debug specific tool logic if needed
    </Note>
  </Step>
  
  <Step title="Push Persona to Production (if changed)">
    ```bash
    lua persona production # Deploy persona version
    ```
    
    Or use: `lua push persona`
  </Step>
  
  <Step title="Push Skill When Ready">
    ```bash
    lua push skill
    ```
    
    Upload new skill version
  </Step>
  
  <Step title="Deploy to Production">
    ```bash
    lua deploy
    ```
    
    Make available to all users
  </Step>
</Steps>

### Quick Fix Workflow

```bash
# Edit the tool
vim src/tools/MyTool.ts

# Test the tool
lua test

# Test conversationally
lua chat

# Push and deploy (direct mode - faster!)
lua push skill && lua deploy
```

## Global Flags

All commands support:

```bash
--help       Show command help
--version    Show CLI version
```

## Environment Variables

Commands automatically load environment variables from:

<Steps>
  <Step title="System Environment">
    Variables from your shell
  </Step>
  <Step title=".env File">
    Variables from project `.env`
  </Step>
  <Step title="lua.skill.yaml">
    Variables from skill config
  </Step>
</Steps>

<Card title="Learn More" href="/concepts/environment-variables" />

## Error Handling

All commands include:
- ✅ Descriptive error messages
- ✅ Exit codes (0 = success, 1 = error)
- ✅ Troubleshooting hints

### Common Errors

<AccordionGroup>
  <Accordion title="No API key found">
    ```
    ❌ No API key found. Run `lua auth configure` first.
    ```
    
    **Solution**: Run `lua auth configure`
  </Accordion>

  <Accordion title="No lua.skill.yaml found">
    ```
    ❌ No lua.skill.yaml found. Please run this command from a skill directory.
    ```
    
    **Solution**: Run command from skill directory or run `lua init` first
  </Accordion>

  <Accordion title="Version already exists">
    ```
    ❌ Version 1.0.0 already exists on the server
    ```
    
    **Solution**: Increment version in `lua.skill.yaml`
  </Accordion>

  <Accordion title="Compilation failed">
    ```
    ❌ No index.ts found in current directory or src/ directory
    ```
    
    **Solution**: Create `index.ts` or `src/index.ts` with skill definition
  </Accordion>
</AccordionGroup>

<Card title="More Troubleshooting" href="/cli/troubleshooting" />

## v3.0.0 Agent Structure

### Project Code Pattern

The v3.0.0 pattern uses `LuaAgent` for unified configuration:

```typescript
// src/index.ts
import { LuaAgent, LuaSkill, LuaWebhook, LuaJob } from 'lua-cli';
import { mySkill } from './skills/my-skill';
import paymentWebhook from './webhooks/payment';
import dailyReportJob from './jobs/daily-report';

// Export agent (v3.0.0 pattern)
export const agent = new LuaAgent({
  name: "my-agent",
  
  // Define personality and behavior
  persona: `You are a helpful assistant for Acme Corp.
  
Your role:
- Help customers with orders and support
- Answer product questions
- Process payments

Communication style:
- Professional yet friendly
- Clear and concise
- Patient and understanding`,

  // Welcome message
  welcomeMessage: "Hi! I'm here to help. What can I do for you?",
  
  // Skills with tools
  skills: [mySkill],
  
  // HTTP endpoints (optional)
  webhooks: [paymentWebhook],
  
  // Scheduled tasks (optional)
  jobs: [dailyReportJob]
});
```

### Project Structure

```
my-agent/
├── src/
│   ├── index.ts              # Agent configuration (LuaAgent)
│   ├── skills/               # Skill definitions
│   │   └── my-skill.ts
│   ├── tools/                # Tool implementations
│   │   ├── OrderLookupTool.ts
│   │   └── CreateTicketTool.ts
│   ├── webhooks/             # Webhook handlers (v3.0.0)
│   │   └── payment.ts
│   ├── jobs/                 # Scheduled jobs (v3.0.0)
│   │   └── daily-report.ts
│   ├── preprocessors/        # Message filters (v3.0.0)
│   │   └── profanity-filter.ts
│   └── postprocessors/       # Response formatters (v3.0.0)
│       └── add-disclaimer.ts
├── lua.skill.yaml            # Auto-synced configuration
├── package.json
├── tsconfig.json
└── .env                      # Local environment variables
```

## Configuration File

### lua.skill.yaml

Auto-managed configuration file:

```yaml
# Agent configuration
agent:
  agentId: agent_abc123
  orgId: org_xyz789
  persona: "..."              # Synced from LuaAgent
  welcomeMessage: "..."       # Synced from LuaAgent

# Multi-skill support
skills:
  - name: my-skill
    version: 1.0.0
    skillId: skill_abc123     # Auto-created

# Webhooks (v3.0.0)
webhooks:
  - name: payment-webhook
    webhookId: webhook_abc123 # Auto-created

# Jobs (v3.0.0)
jobs:
  - name: daily-report
    jobId: job_abc123         # Auto-created

# Environment variables
skill:
  env:
    API_KEY: your_key_here
```

**Auto-managed fields:**
- `skillId` - Created during compilation
- `webhookId` - Created during compilation
- `jobId` - Created during compilation
- `skills`, `webhooks`, `jobs` arrays - Populated from code
- `persona`, `welcomeMessage` - Synced from LuaAgent

**Manual fields:**
- `agentId` - Set during `lua init`
- `orgId` - Set during `lua init`
- `version` - Update when releasing
- `env` - Set your variables

## System Requirements

<CardGroup cols={2}>
  <Card title="Node.js" icon="node-js">
    Version 16.0.0 or higher
  </Card>
  <Card title="npm" icon="npm">
    Version 7.0.0 or higher
  </Card>
  <Card title="TypeScript" icon="code">
    Included in template (knowledge helpful)
  </Card>
  <Card title="Git" icon="git">
    Optional but recommended
  </Card>
</CardGroup>

## Storage Locations

<Tabs>
  <Tab title="Credentials">
    **System Keychain**
    - macOS: Keychain
    - Windows: Credential Vault
    - Linux: libsecret
  </Tab>

  <Tab title="Project Files">
    **Your Project Directory**
    ```
    your-skill/
    ├── src/          # Your code
    ├── dist/         # Compiled output
    ├── .lua/         # CLI cache
    ├── node_modules/ # Dependencies
    └── lua.skill.yaml
    ```
  </Tab>

  <Tab title="Temporary">
    **Build Artifacts**
    - `dist/` - Deployment bundles
    - `.lua/` - Compilation cache
    
    Safe to delete, will be regenerated
  </Tab>
</Tabs>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Authentication"
    icon="key"
    href="/cli/authentication"
  >
    Set up API key authentication
  </Card>
  <Card
    title="Skill Management"
    icon="wrench"
    href="/cli/skill-management"
  >
    Learn all skill management commands
  </Card>
  <Card
    title="Environment Command"
    icon="gear"
    href="/cli/env-command"
  >
    Manage sandbox and production variables
  </Card>
  <Card
    title="Persona Command"
    icon="user"
    href="/cli/persona-command"
  >
    Configure agent personality
  </Card>
  <Card
    title="Features Command"
    icon="sliders"
    href="/cli/features-command"
  >
    Manage agent capabilities
  </Card>
  <Card
    title="Chat Command"
    icon="comments"
    href="/cli/chat-command"
  >
    Interactive chat with your agent
  </Card>
  <Card
    title="Utility Commands"
    icon="terminal"
    href="/cli/utility-commands"
  >
    Shell autocomplete and more
  </Card>
</CardGroup>

