---
title: "CLI Overview"
description: "Command-line interface for building and deploying AI agents"
---

## Lua AI CLI v3.0.0

Build and deploy AI agents with superpowers

```bash
lua [options] [command]
```

<Note>
  **New in v3.3.0 (Non-Interactive Mode):** All commands now support non-interactive mode for AI IDEs (Cursor, Copilot), CI/CD pipelines, and scripting. See [Non-Interactive Mode](/cli/non-interactive-mode) for complete reference.
</Note>

<Note>
  **New in v3.1.0 (Marketplace):** - ğŸ›’ **Lua Marketplace** - Discover, install, and publish skills directly from the CLI with `lua marketplace`.
</Note>

<Note>
  **New in v3.0.0 (lua-cli package):** - ğŸ¤– **LuaAgent** - Unified agent
  configuration with persona, skills, webhooks, jobs, and processors - ğŸª
  **LuaWebhook** - HTTP endpoints for external integrations (Stripe, Shopify,
  etc.) - â° **LuaJob** - Scheduled tasks with cron patterns - ğŸ“¥
  **PreProcessor** - Filter and route messages before they reach your agent - ğŸ“¤
  **PostProcessor** - Transform and format agent responses - ğŸ”„ **Jobs API** -
  Dynamically create scheduled tasks from tools
</Note>

<Note>
  **New in v2.6.0 (CLI commands):** - ğŸ¯ Direct environment access for all
  commands - âŒ¨ï¸ Shell autocomplete support (Bash, Zsh, Fish) - ğŸš€ New `lua
  skills` command for production skill management - âš¡ New `lua features`
  command for managing agent capabilities - âš¡ Faster workflows with `lua push
  skill`, `lua env production`, etc.
</Note>

### Options

```bash
-V, --version   # Output the version number
-h, --help      # Display help for command
```

### All Commands

| Command          | Category          | Description                                                                 | Non-Interactive |
| ---------------- | ----------------- | --------------------------------------------------------------------------- | --------------- |
| `lua auth`       | ğŸ” Authentication | Manage API keys and authentication                                          | âœ… `--force`    |
| `lua init`       | ğŸš€ Project Setup  | Initialize a new Lua skill project                                          | âœ… Full support |
| `lua env`        | âš™ï¸ Configuration  | Manage environment variables (sandbox/production)                           | âœ… Full support |
| `lua persona`    | ğŸ¤– Configuration  | Manage agent persona (sandbox/production)                                   | âœ… Full support |
| `lua features`   | âš¡ Configuration  | Manage agent capabilities and features                                      | âœ… Full support |
| `lua resources`  | ğŸ“š Configuration  | Manage agent knowledge base                                                 | âœ… Full support |
| `lua marketplace`| ğŸ›’ Ecosystem      | Discover, install, and publish skills                                       | âœ… Full support |
| `lua skills`     | ğŸ”§ Development    | View and manage skills (sandbox/production)                                 | âœ… Full support |
| `lua compile`    | ğŸ“¦ Development    | Compile skill to deployable format                                          | âœ… `--sync` `--verbose`  |
| `lua sync`       | ğŸ”„ Development    | Detect and resolve drift between server and local code                      | âœ… Full support |
| `lua test`       | ğŸ’¬ Testing        | Test skill tools interactively                                              | âœ… Full support |
| `lua chat`       | ğŸ’¬ Testing        | Interactive chat with your agent                                            | âœ… `-e` `-m`    |
| `lua push`       | â˜ï¸ Deployment     | Push components to server                                                   | âœ… Full support |
| `lua deploy`     | ğŸš€ Deployment     | Deploy version to production                                                | âœ… Full support |
| `lua mcp`        | ğŸ”Œ Integration    | Manage MCP (Model Context Protocol) servers                                 | âœ… Full support |
| `lua integrations`| ğŸ”Œ Integration   | Connect third-party accounts via Unified.to                                 | âœ… Full support |
| `lua production` | ğŸš€ Deployment     | View and manage production environment                                      | âœ… Full support |
| `lua channels`   | ğŸ”Œ Integration    | Manage communication channels                                               | âœ… `list`       |
| `lua logs`       | ğŸ› Debugging      | View and filter agent logs by component type (Skills, Jobs, Webhooks, etc.) | âœ… Full support |
| `lua completion` | âŒ¨ï¸ Utilities      | Generate shell autocomplete scripts                                         | âœ… Direct       |
| `lua admin`      | ğŸ› ï¸ Utilities      | Open admin dashboard in browser                                             | âœ… Direct       |
| `lua evals`      | ğŸ“Š Utilities      | Open evaluations dashboard in browser                                       | âœ… Direct       |
| `lua docs`       | ğŸ“– Utilities      | Open documentation in browser                                               | âœ… Direct       |

<CardGroup cols={2}>
  <Card title="AI Agent Building Guide" icon="wand-magic-sparkles" href="/ai-guide">
    **For AI IDEs**: Complete workflow for Cursor, Windsurf, GitHub Copilot
  </Card>
  <Card title="Non-Interactive Mode" icon="robot" href="/cli/non-interactive-mode">
    Command reference for automation, CI/CD, and scripting
  </Card>
</CardGroup>

### Quick Examples

```bash
# Authentication & Setup
lua auth configure      # ğŸ”‘ Set up your API key
lua init               # ğŸš€ Initialize a new project

# Configuration (Interactive or Direct)
lua env                # âš™ï¸ Manage environment variables
lua env sandbox        # ğŸ¯ Direct: manage sandbox .env file
lua env production     # ğŸ¯ Direct: manage production env vars
lua persona            # ğŸ¤– Manage agent persona
lua persona sandbox    # ğŸ¯ Direct: edit sandbox persona
lua persona production # ğŸ¯ Direct: deploy persona version
lua features           # âš¡ Manage agent capabilities (tickets, RAG, etc.)
lua resources          # ğŸ“š Manage knowledge base
lua marketplace        # ğŸ›’ Access skills marketplace

# Development
lua skills             # ğŸ”§ View and manage skills
lua skills sandbox     # ğŸ¯ Direct: view local skills
lua skills production  # ğŸ¯ Direct: manage production skills
lua compile            # ğŸ“¦ Compile your skills
lua sync               # ğŸ”„ Check for drift between server and local
lua test               # ğŸ§ª Test tools interactively
lua chat               # ğŸ’¬ Start interactive chat

# Deployment (Interactive or Direct)
lua push               # â˜ï¸ Push to server (choose component)
lua push skill         # ğŸ¯ Direct: push skill
lua push persona       # ğŸ¯ Direct: push persona
lua push mcp           # ğŸ¯ Direct: push MCP server
lua push all --force   # ğŸ¯ Push all components
lua deploy             # ğŸš€ Deploy to production

# Integration & Debugging
lua mcp                # ğŸ”Œ Manage MCP servers (list, activate, deactivate)
lua integrations       # ğŸ”Œ Connect third-party accounts (Linear, Discord, etc.)
lua channels           # ğŸ”Œ Manage communication channels
lua logs               # ğŸ› View and filter execution logs (interactive filtering)

# Utilities
lua completion bash    # âŒ¨ï¸ Generate bash autocomplete
lua completion zsh     # âŒ¨ï¸ Generate zsh autocomplete
lua completion fish    # âŒ¨ï¸ Generate fish autocomplete
lua admin              # ğŸ› ï¸ Open admin dashboard
lua evals              # ğŸ“Š Open evaluations dashboard
lua docs               # ğŸ“– Open documentation
```

<Note>
**Get help for any command**: `lua [command] --help` or `lua help [command]`

**Documentation**: https://docs.heylua.ai  
**Support**: https://heylua.ai/support

</Note>

## Quick Command Reference

<CardGroup cols={3}>
  <Card title="lua init" icon="plus">
    Initialize new skill project
  </Card>
  <Card title="lua skills" icon="code">
    View and manage skills
  </Card>
  <Card title="lua env" icon="key">
    Manage environment variables
  </Card>
  <Card title="lua persona" icon="user">
    Configure agent personality
  </Card>
  <Card title="lua features" icon="sliders">
    Manage agent capabilities
  </Card>
  <Card title="lua mcp" icon="plug">
    Manage MCP servers
  </Card>
  <Card title="lua integrations" icon="link">
    Connect third-party accounts
  </Card>
  <Card title="lua sync" icon="rotate">
    Detect and resolve drift
  </Card>
  <Card title="lua test" icon="flask">
    Test tools interactively
  </Card>
  <Card title="lua chat" icon="comments">
    Interactive chat with your agent
  </Card>
  <Card title="lua push" icon="upload">
    Upload version to server
  </Card>
  <Card title="lua deploy" icon="rocket">
    Deploy to production
  </Card>
  <Card title="lua completion" icon="terminal">
    Shell autocomplete setup
  </Card>
</CardGroup>

## Shell Autocomplete âš¡ NEW

Enable tab completion for all Lua CLI commands and arguments:

<Tabs>
  <Tab title="Bash">
    ```bash
    # One-time setup
    lua completion bash >> ~/.bashrc
    source ~/.bashrc
    
    # Now try:
    lua pu<TAB>      # Completes to: lua push
    lua push <TAB>   # Shows: skill, persona
    lua env <TAB>    # Shows: sandbox, staging, production
    ```
  </Tab>

  <Tab title="Zsh">
    ```bash
    # One-time setup
    lua completion zsh >> ~/.zshrc
    source ~/.zshrc
    
    # Now try:
    lua <TAB>        # Shows all commands
    lua persona <TAB> # Shows: sandbox, staging, production
    ```
  </Tab>

  <Tab title="Fish">
    ```bash
    # One-time setup
    lua completion fish > ~/.config/fish/completions/lua.fish
    
    # Now try:
    lua <TAB>        # Shows all commands with descriptions
    ```
  </Tab>
</Tabs>

<Card title="Learn More" href="/cli/utility-commands#autocomplete" />

## Direct Mode âš¡ NEW

Skip interactive prompts by specifying your target directly:

<Tabs>
  <Tab title="Push Commands">
    ```bash
    # Interactive (old way - still works!)
    lua push
    ? What would you like to push? 
      â€º skill
        persona
    
    # Direct (new way - faster!)
    lua push skill      # Push skill directly
    lua push persona    # Push persona directly
    ```
  </Tab>

  <Tab title="Environment Commands">
    ```bash
    # Interactive
    lua env
    ? Select environment:
      â€º Sandbox
        Production
    
    # Direct
    lua env sandbox      # Manage .env file
    lua env production   # Manage API env vars
    lua env staging      # Alias for sandbox
    ```
  </Tab>

  <Tab title="Persona Commands">
    ```bash
    # Interactive
    lua persona
    ? Select environment:
      â€º Sandbox
        Production
    
    # Direct
    lua persona sandbox      # Edit sandbox persona
    lua persona production   # Deploy persona version
    ```
  </Tab>

  <Tab title="Skills Commands">
    ```bash
    # Interactive
    lua skills
    ? Select environment:
      â€º Sandbox
        Production
    
    # Direct
    lua skills sandbox     # View local skills
    lua skills production  # Manage production skills
    ```
  </Tab>
</Tabs>

## Command Categories

### Authentication

<Tabs>
  <Tab title="configure">
    Set up API key authentication
    ```bash
    lua auth configure
    ```
    
    Choose between:
    - **Email**: OTP verification
    - **API Key**: Existing key
    
    <Card title="Learn More" href="/cli/authentication" />
  </Tab>

  <Tab title="key">
    Display stored API key
    
    ```bash
    lua auth key
    ```
    
    Shows key after confirmation prompt
  </Tab>

  <Tab title="logout">
    Delete stored credentials
    ```bash
    lua auth logout
    ```
    
    Removes key from system keychain
  </Tab>
</Tabs>

### Skill Management

<Tabs>
  <Tab title="init">
    Create new skill project
    ```bash
    mkdir my-skill && cd my-skill
    lua init                    # Minimal project (recommended)
    lua init --with-examples    # Include 30+ example tools
    ```
    
    **Default (minimal):**
    - Clean agent ready to customize
    - TypeScript configuration
    - `lua.skill.yaml` config
    
    **With --with-examples:**
    - 30+ example tools
    - Example webhooks, jobs, processors
    - Complete e-commerce flow examples
    
    <Card title="Learn More" href="/cli/skill-management#init" />
  </Tab>

  <Tab title="compile">
    Compile TypeScript to JavaScript
    
    ```bash
    lua compile
    ```
    
    Automatically:
    - Detects all tools
    - Bundles with esbuild
    - Creates deployment artifacts
    - Updates skill IDs
    
    <Card title="Learn More" href="/cli/skill-management#compile" />
  </Tab>

  <Tab title="test">
    Test tools interactively
    
    ```bash
    lua test
    ```
    
    Features:
    - Select tool from list
    - Dynamic input prompts
    - Secure sandbox execution
    - Detailed error reporting
    
    <Card title="Learn More" href="/cli/skill-management#test" />
  </Tab>

  <Tab title="push">
    Upload version to server
    
    ```bash
    lua push
    ```
    
    - Compiles code
    - Validates configuration
    - Uploads to server
    - Creates new version
    
    <Card title="Learn More" href="/cli/skill-management#push" />
  </Tab>

  <Tab title="deploy">
    Deploy to production
    
    ```bash
    lua deploy
    ```
    
    - Lists available versions
    - Shows current version
    - Requires confirmation
    - Immediate deployment
    
    <Card title="Learn More" href="/cli/skill-management#deploy" />
  </Tab>

  <Tab title="chat">
    Interactive chat
    ```bash
    lua chat
    ```
    
    Features:
    - Sandbox or production mode
    - Test conversational flows
    - Skill overrides
    - Persona customization
    
    <Card title="Learn More" href="/cli/chat-command" />
  </Tab>
</Tabs>

## Common Workflows

### New Project Workflow

<Steps>
  <Step title="Authenticate">
    ```bash
    lua auth configure
    ```
  </Step>

  <Step title="Initialize">
    ```bash
    mkdir my-skill && cd my-skill
    lua init                    # Minimal project (recommended)
    # OR
    lua init --with-examples    # Include example code
    ```
  </Step>

  <Step title="Configure Environment">
    ```bash
    lua env sandbox
    ```
    
    Add API keys and configuration to .env file
  </Step>

  <Step title="Configure Persona">
    ```bash
    lua persona sandbox
    ```
    
    Define your agent's personality in local file
  </Step>

  <Step title="Test Your Agent">
    ```bash
    lua chat
    ```
    
    Interactive chat in sandbox mode
    
    <Note>
      **Optional**: Use `lua test` to test individual tools with specific inputs
    </Note>
  </Step>

  <Step title="Deploy">
    ```bash
    lua push
    lua deploy
    ```
  </Step>
</Steps>

### Development Workflow

<Steps>
  <Step title="Configure Environment (if needed)">
    ```bash
    lua env sandbox      # Update local .env
    lua env production   # Update production env vars
    ```
    
    Add any new API keys or configuration needed
  </Step>

  <Step title="Update Persona (if needed)">
    ```bash
    lua persona sandbox  # Edit and test locally
    ```
    
    Refine agent personality based on feedback
  </Step>

  <Step title="Make Changes">Edit your tools in `src/tools/*.ts`</Step>

  <Step title="Test Your Agent">
    ```bash
    lua chat
    ```
    
    Select sandbox mode to test with local changes
    
    <Note>
      **Pro tip**: Use `lua test` to debug specific tool logic if needed
    </Note>
  </Step>

  <Step title="Push Persona to Production (if changed)">
    ```bash
    lua persona production  # Deploy persona version
    ```
    
    Or use: `lua push persona`
  </Step>

  <Step title="Push Skill When Ready">
    ```bash
    lua push skill
    ```
    
    Upload new skill version
  </Step>

  <Step title="Deploy to Production">
    ```bash
    lua deploy
    ```
    
    Make available to all users
  </Step>
</Steps>

### Quick Fix Workflow

```bash
# Edit the tool
vim src/tools/MyTool.ts

# Test the tool
lua test

# Test conversationally
lua chat

# Push and deploy (direct mode - faster!)
lua push skill && lua deploy
```

## Global Flags

All commands support:

```bash
--help       Show command help
--version    Show CLI version
```

## Environment Variables

Commands automatically load environment variables from:

<Steps>
  <Step title="System Environment">Variables from your shell</Step>
  <Step title=".env File">Variables from project `.env`</Step>
  <Step title="lua.skill.yaml">Variables from skill config</Step>
</Steps>

<Card title="Learn More" href="/concepts/environment-variables" />

## Error Handling

All commands include:

- âœ… Descriptive error messages
- âœ… Exit codes (0 = success, 1 = error)
- âœ… Troubleshooting hints

### Common Errors

<AccordionGroup>
  <Accordion title="No API key found">
    ```
    âŒ No API key found. Run `lua auth configure` first.
    ```
    
    **Solution**: Run `lua auth configure`
  </Accordion>

  <Accordion title="No lua.skill.yaml found">
    ```
    âŒ No lua.skill.yaml found. Please run this command from a skill directory.
    ```
    
    **Solution**: Run command from skill directory or run `lua init` first
  </Accordion>

  <Accordion title="Version already exists">
    ```
    âŒ Version 1.0.0 already exists on the server
    ```
    
    **Solution**: Increment the version number in `lua.skill.yaml` (this is the only field you should manually edit)
  </Accordion>

  <Accordion title="Compilation failed">
    ```
    âŒ No index.ts found in current directory or src/ directory
    ```
    
    **Solution**: Create `index.ts` or `src/index.ts` with skill definition
  </Accordion>
</AccordionGroup>

<Card title="More Troubleshooting" href="/cli/troubleshooting" />

## v3.0.0 Agent Structure

### Project Code Pattern

The v3.0.0 pattern uses `LuaAgent` for unified configuration:

```typescript
// src/index.ts
import { LuaAgent, LuaSkill, LuaWebhook, LuaJob, LuaMCPServer } from "lua-cli";
import { mySkill } from "./skills/my-skill";
import paymentWebhook from "./webhooks/payment";
import dailyReportJob from "./jobs/daily-report";
import filesystemServer from "./mcp/filesystem";

// Export agent (v3.0.0 pattern)
export const agent = new LuaAgent({
  name: "my-agent",

  // Define personality and behavior
  persona: `You are a helpful assistant for Acme Corp.
  
Your role:
- Help customers with orders and support
- Answer product questions
- Process payments

Communication style:
- Professional yet friendly
- Clear and concise
- Patient and understanding`,

  // Skills with tools
  skills: [mySkill],

  // HTTP endpoints (optional)
  webhooks: [paymentWebhook],

  // Scheduled tasks (optional)
  jobs: [dailyReportJob],

  // MCP servers for external tools (optional)
  mcpServers: [filesystemServer],
});
```

### Project Structure

```
my-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # Agent configuration (LuaAgent)
â”‚   â”œâ”€â”€ skills/               # Skill definitions
â”‚   â”‚   â””â”€â”€ my-skill.ts
â”‚   â”œâ”€â”€ tools/                # Tool implementations
â”‚   â”‚   â”œâ”€â”€ OrderLookupTool.ts
â”‚   â”‚   â””â”€â”€ CreateTicketTool.ts
â”‚   â”œâ”€â”€ webhooks/             # Webhook handlers (v3.0.0)
â”‚   â”‚   â””â”€â”€ payment.ts
â”‚   â”œâ”€â”€ jobs/                 # Scheduled jobs (v3.0.0)
â”‚   â”‚   â””â”€â”€ daily-report.ts
â”‚   â”œâ”€â”€ mcp/                  # MCP server configurations
â”‚   â”‚   â””â”€â”€ filesystem.ts
â”‚   â”œâ”€â”€ preprocessors/        # Message filters (v3.0.0)
â”‚   â”‚   â””â”€â”€ profanity-filter.ts
â”‚   â””â”€â”€ postprocessors/       # Response formatters (v3.0.0)
â”‚       â””â”€â”€ add-disclaimer.ts
â”œâ”€â”€ lua.skill.yaml            # Auto-synced configuration
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .env                      # Local environment variables
```

## Configuration File

### lua.skill.yaml

Auto-managed state manifest (IDs and versions only):

```yaml
# Agent configuration
agent:
  agentId: agent_abc123
  orgId: org_xyz789

# Multi-skill support
skills:
  - name: my-skill
    version: 1.0.0
    skillId: skill_abc123 # Auto-created

# Webhooks (v3.0.0)
webhooks:
  - name: payment-webhook
    webhookId: webhook_abc123 # Auto-created

# Jobs (v3.0.0)
jobs:
  - name: daily-report
    jobId: job_abc123 # Auto-created (version tracked on server)

# MCP Servers
mcpServers:
  - name: filesystem
    mcpServerId: mcp_abc123 # Auto-created
```

**Auto-managed fields:**

- `skillId` - Created during compilation
- `webhookId` - Created during compilation
- `jobId` - Created during compilation
- `mcpServerId` - Created during compilation
- `skills`, `webhooks`, `jobs`, `mcpServers` arrays - Populated from code
- Versions/IDs are tracked here; persona/env/schedule live in code (sandbox) or server (production)

**Manual fields:**

- `agentId` - Set during `lua init`
- `orgId` - Set during `lua init`
- `version` - Update when releasing (for each component)

## System Requirements

<CardGroup cols={2}>
  <Card title="Node.js" icon="node-js">
    Version 16.0.0 or higher
  </Card>
  <Card title="npm" icon="npm">
    Version 7.0.0 or higher
  </Card>
  <Card title="TypeScript" icon="code">
    Included in template (knowledge helpful)
  </Card>
  <Card title="Git" icon="git">
    Optional but recommended
  </Card>
</CardGroup>

## Storage Locations

<Tabs>
  <Tab title="Credentials">
    **System Keychain**
    - macOS: Keychain
    - Windows: Credential Vault
    - Linux: libsecret
  </Tab>

  <Tab title="Project Files">
    **Your Project Directory**
    
    ```
    your-skill/
    â”œâ”€â”€ src/            # Your code
    â”œâ”€â”€ dist/           # Compiled output
    â”œâ”€â”€ .lua/           # CLI cache
    â”œâ”€â”€ node_modules/   # Dependencies
    â””â”€â”€ lua.skill.yaml
    ```
  </Tab>

  <Tab title="Temporary">
    **Build Artifacts**
    - `dist/` - Deployment bundles
    - `.lua/` - Compilation cache
    
    Safe to delete, will be regenerated
  </Tab>
</Tabs>

## Next Steps

<CardGroup cols={2}>
  <Card title="Authentication" icon="key" href="/cli/authentication">
    Set up API key authentication
  </Card>
  <Card title="Skill Management" icon="wrench" href="/cli/skill-management">
    Learn all skill management commands
  </Card>
  <Card title="Sync Command" icon="rotate" href="/cli/sync-command">
    Detect and resolve drift
  </Card>
  <Card title="Environment Command" icon="gear" href="/cli/env-command">
    Manage sandbox and production variables
  </Card>
  <Card title="Persona Command" icon="user" href="/cli/persona-command">
    Configure agent personality
  </Card>
  <Card title="Features Command" icon="sliders" href="/cli/features-command">
    Manage agent capabilities
  </Card>
  <Card title="MCP Command" icon="plug" href="/cli/mcp-command">
    Manage MCP servers for external tools
  </Card>
  <Card title="Integrations Command" icon="link" href="/cli/integrations-command">
    Connect third-party accounts
  </Card>
  <Card title="Chat Command" icon="comments" href="/cli/chat-command">
    Interactive chat with your agent
  </Card>
  <Card title="Utility Commands" icon="terminal" href="/cli/utility-commands">
    Shell autocomplete and more
  </Card>
</CardGroup>
