---
title: "Skill Management"
description: "Commands for creating, compiling, testing, and deploying skills"
---

## Overview

Skill management commands help you build, test, and deploy your AI skills.

<CardGroup cols={2}>
  <Card title="lua init" icon="plus">
    Create new skill project
  </Card>
  <Card title="lua compile" icon="gears">
    Compile TypeScript code
  </Card>
  <Card title="lua test" icon="flask">
    Test tools interactively
  </Card>
  <Card title="lua push" icon="upload">
    Upload version to server
  </Card>
  <Card title="lua deploy" icon="rocket">
    Deploy to production
  </Card>
</CardGroup>

## lua init

Initialize a new Lua skill project in the current directory.

```bash
mkdir my-skill && cd my-skill
lua init
```

### What It Does

<Steps>
  <Step title="Choose Agent">
    Select existing agent or create new one
  </Step>
  
  <Step title="Configure Agent (if new)">
    - Enter business name
    - Enter agent name
    - Select business type
    - Select brand personality
    - Enter brand traits
    - Configure features
  </Step>
  
  <Step title="Create Project">
    - Copies template files
    - Creates `lua.skill.yaml`
    - Installs dependencies
    - Ready to customize!
  </Step>
</Steps>

### Interactive Prompts

<Tabs>
  <Tab title="Create New Agent">
    ```bash
    $ lua init
    ? What would you like to do? Create new agent
    ? Enter business name: My Coffee Shop
    ? Enter agent name: CoffeeBot
    ? Select business type: Food & Beverage
    ? Select brand personality: Friendly
    ? Enter brand traits: Warm, welcoming, knowledgeable
    🔄 Creating agent...
    ✅ Agent created successfully!
    ✅ Created lua.skill.yaml
    ✅ Copied template files
    📦 Installing dependencies...
    ✅ Lua skill project initialized successfully!
    ```
  </Tab>

  <Tab title="Use Existing Agent">
    ```bash
    $ lua init
    ? What would you like to do? Select existing agent
    ? Select organization: My Organization
    ? Select agent: CoffeeBot
    ✅ Created lua.skill.yaml
    ✅ Copied template files
    📦 Installing dependencies...
    ✅ Lua skill project initialized successfully!
    ```
  </Tab>
</Tabs>

### What Gets Created

```
your-skill/
├── src/
│   ├── index.ts              # Skill definitions (START HERE)
│   ├── tools/                # Tool implementations
│   │   ├── GetWeatherTool.ts
│   │   ├── UserDataTool.ts
│   │   ├── ProductsTool.ts
│   │   ├── BasketTool.ts
│   │   ├── OrderTool.ts
│   │   ├── CustomDataTool.ts
│   │   ├── PaymentTool.ts
│   │   └── CreatePostTool.ts
│   └── services/             # Helper services (optional)
├── lua.skill.yaml            # Configuration (auto-managed)
├── package.json              # Dependencies
├── tsconfig.json             # TypeScript config
├── .env.example              # Environment variables template
└── README.md                 # Project documentation
```

### Configuration File

`lua.skill.yaml` is created with:

```yaml
agent:
  agentId: agent_abc123
  orgId: org_xyz789
  persona: "..."
  welcomeMessage: "..."

skills: []  # Auto-populated during compilation
```

## lua compile

Compile TypeScript skill into deployable JavaScript bundles.

```bash
lua compile
```

### What It Does

<Steps>
  <Step title="Analyze Code">
    Detects all tools from your `src/index.ts` file
  </Step>
  
  <Step title="Bundle Tools">
    Uses esbuild to create optimized JavaScript bundles
  </Step>
  
  <Step title="Extract Metadata">
    Extracts tool names, descriptions, and schemas
  </Step>
  
  <Step title="Create Deployment">
    Generates deployment artifacts in `dist/` directory
  </Step>
  
  <Step title="Update Config">
    Creates/updates skills in `lua.skill.yaml`
  </Step>
</Steps>

### Output

```
dist/
├── deployment.json          # Deployment metadata
├── index.js                 # Main skill bundle
└── tools/                   # Individual tool bundles
    ├── GetWeatherTool.js
    ├── UserDataTool.js
    └── ...

.lua/
├── deploy.json              # Legacy format
├── get_weather.js           # Uncompressed (debugging)
└── ...
```

### Example Output

```bash
$ lua compile
🔨 Compiling Lua skill...
📦 Found 15 tools to bundle...
📦 Bundling GetWeatherTool...
📦 Bundling UserDataTool...
📦 Bundling ProductsTool...
... (more tools)
📦 Bundling main index...
✅ Skill compiled successfully - 15 tools bundled
```

### Features

- ✅ **Automatic Detection** - Finds all tools in your code
- ✅ **Fast Bundling** - Uses esbuild for speed
- ✅ **Type Safety** - Validates TypeScript
- ✅ **Dependency Management** - Bundles all dependencies
- ✅ **Skill Creation** - Auto-creates skills in config

## lua test

Test individual tools locally in a sandboxed environment.

```bash
lua test
```

### How It Works

<Steps>
  <Step title="Compile">
    Compiles your skill first
  </Step>
  
  <Step title="List Tools">
    Shows all available tools
  </Step>
  
  <Step title="Select Tool">
    Choose which tool to test
  </Step>
  
  <Step title="Enter Inputs">
    Dynamic prompts based on tool's schema
  </Step>
  
  <Step title="Execute">
    Runs tool in secure VM sandbox
  </Step>
  
  <Step title="View Results">
    Shows output or error messages
  </Step>
</Steps>

### Example Session

```bash
$ lua test
🧪 Testing Lua skill...
📦 Compiling code first...
✅ Skill compiled successfully
📄 Loaded environment variables from .env file

? 🔧 Select a tool to test:
❯ get_weather - Get the weather for a given city
  create_product - Create a new product
  search_products - Search products
  get_user_data - Get user data
  
✅ Selected tool: get_weather

📝 Enter input values:
? city (required): London

🚀 Executing tool...
Input: {
  "city": "London"
}
✅ Tool execution successful!
Output: {
  "weather": "3",
  "city": "London",
  "temperature": 15.2,
  "description": "Windspeed 12.3 km/h"
}
```

### Features

- ✅ **Dynamic Prompts** - Based on Zod schema
- ✅ **Type Validation** - Validates inputs automatically
- ✅ **Environment Loading** - Loads `.env` and `lua.skill.yaml` variables
- ✅ **Secure Sandbox** - Isolated VM execution
- ✅ **Detailed Errors** - Clear error messages

### Testing Complex Inputs

```bash
# Nested objects
? shippingAddress.street (required): 123 Main St
? shippingAddress.city (required): New York
? shippingAddress.zip (required): 10001

# Arrays
? items[0].id (required): product_123
? items[0].quantity (required): 2
? Add another item? No

# Optional fields
? description (optional): [Press Enter to skip]
```

## lua push

Push your compiled skill or persona version to the Lua server with optional immediate deployment.

```bash
lua push              # Interactive: choose skill or persona
lua push skill        # Direct: push skill
lua push persona      # Direct: push persona
```

<Note>
**New in v2.6.0:** Direct mode lets you skip the selection prompt for faster workflows!
</Note>

### Usage Modes

<Tabs>
  <Tab title="Interactive Mode">
    **Default behavior - prompts for selection**
    
    ```bash
    $ lua push
    ? What would you like to push?
      › skill
        persona
    ```
    
    Best for: When you're not sure or want to see options
  </Tab>

  <Tab title="Direct Mode - Skill">
    **Skip prompt and push skill directly**
    
    ```bash
    $ lua push skill
    # No prompt - goes straight to pushing skill
    ```
    
    Best for: Quick iterations, automation, when you know what you want
  </Tab>

  <Tab title="Direct Mode - Persona">
    **Skip prompt and push persona directly**
    
    ```bash
    $ lua push persona
    # No prompt - goes straight to pushing persona
    ```
    
    Best for: Persona-only updates, faster workflow
  </Tab>
</Tabs>

### What It Does (Skills)

<Steps>
  <Step title="Select Skill (if interactive)">
    Choose which skill to push (if multiple)
  </Step>
  
  <Step title="Enter Version">
    Enter new version number (auto-suggests next patch)
    
    ```
    Current version: 1.0.0
    ? Enter new version to push: (1.0.1)
    ```
  </Step>
  
  <Step title="Update Configuration">
    Updates version in `lua.skill.yaml`
  </Step>
  
  <Step title="Authenticate">
    Validates your API key
  </Step>
  
  <Step title="Compile">
    Automatically compiles the skill
  </Step>
  
  <Step title="Upload">
    Uploads bundles to server
  </Step>
  
  <Step title="Optional Deploy">
    Choose to deploy immediately or later
    
    ```
    ? Would you like to deploy this version to production now? (y/N)
    ```
  </Step>
</Steps>

### Example: Push Only (Interactive)

```bash
$ lua push
? What would you like to push?
  › skill
    persona

📦 Pushing skill: customer-service

Current version: 1.0.0
? Enter new version to push: (1.0.1) ⏎

📝 Updating version from 1.0.0 to 1.0.1
✅ Authenticated
🔄 Compiling skill...
✅ Skill compiled successfully - 10 tools bundled
🔄 Pushing version to server...
✅ Version 1.0.1 of "customer-service" pushed successfully

? Would you like to deploy this version to production now? No

[Version pushed, use 'lua deploy' to deploy later]
```

### Example: Push Only (Direct Mode)

```bash
$ lua push skill
📦 Pushing skill: customer-service

Current version: 1.0.0
? Enter new version to push: (1.0.1) ⏎

📝 Updating version from 1.0.0 to 1.0.1
✅ Authenticated
🔄 Compiling skill...
✅ Skill compiled successfully - 10 tools bundled
🔄 Pushing version to server...
✅ Version 1.0.1 of "customer-service" pushed successfully

? Would you like to deploy this version to production now? No

[Version pushed, use 'lua deploy' to deploy later]
```

### Example: Push and Deploy

```bash
$ lua push
📦 Pushing skill: order-management

Current version: 0.5.0
? Enter new version to push: 1.0.0

📝 Updating version from 0.5.0 to 1.0.0
✅ Authenticated
🔄 Compiling skill...
✅ Skill compiled successfully - 8 tools bundled
🔄 Pushing version to server...
✅ Version 1.0.0 of "order-management" pushed successfully

? Would you like to deploy this version to production now? Yes

⚠️  WARNING: You are about to deploy to PRODUCTION!
⚠️  This will affect ALL users immediately.

? Are you absolutely sure you want to deploy? Yes

🔄 Publishing version...
✅ Version 1.0.0 deployed successfully to production
```

### Version Management

<Tabs>
  <Tab title="Auto-Increment">
    The command auto-suggests the next patch version:
    
    ```
    Current: 1.0.0  → Suggests: 1.0.1
    Current: 1.5.9  → Suggests: 1.5.10
    Current: 2.0.0  → Suggests: 2.0.1
    ```
    
    Press Enter to accept or type your own version
  </Tab>

  <Tab title="Custom Version">
    You can enter any valid semver version:
    
    ```
    Current: 0.5.0
    ? Enter: 1.0.0  # Major release
    
    Current: 1.2.3
    ? Enter: 1.3.0  # Minor update
    
    Current: 2.0.0
    ? Enter: 2.0.1-beta  # Pre-release
    ```
  </Tab>

  <Tab title="Semantic Versioning">
    Follow semver conventions:
    
    - **MAJOR** (2.0.0): Breaking changes
    - **MINOR** (1.1.0): New features
    - **PATCH** (1.0.1): Bug fixes
    
    ```yaml
    # In lua.skill.yaml
    skills:
      - name: my-skill
        version: 1.0.1  # Auto-updated by push
    ```
  </Tab>
</Tabs>

### Deploy Now or Later?

<Tabs>
  <Tab title="Deploy Later (Recommended)">
    **Push now, test, deploy when ready**
    
    ```bash
    $ lua push
    ? Deploy now? No  # Default
    
    # Test in sandbox
    $ lua chat → Sandbox mode
    
    # Deploy when satisfied
    $ lua deploy
    ```
    
    **Best for:**
    - Major changes
    - Need more testing
    - Team coordination
    - Off-peak deployment
  </Tab>

  <Tab title="Deploy Immediately">
    **One-command deployment**
    
    ```bash
    $ lua push
    ? Deploy now? Yes
    ? Absolutely sure? Yes
    ✅ Deployed
    ```
    
    **Best for:**
    - Critical hotfixes
    - Small bug fixes
    - Well-tested changes
    - Urgent updates
  </Tab>
</Tabs>

### Important Notes

<Warning>
**Version Management:**
- Always increments version (cannot overwrite)
- Version is updated in `lua.skill.yaml`
- All versions are preserved on server
- Can deploy any previous version

**Immediate Deployment:**
- Requires two confirmations for safety
- Affects all users immediately
- Have rollback plan ready
- Monitor after deployment
</Warning>

### Version Management

Update version in `lua.skill.yaml`:

```yaml
skills:
  - name: my-skill
    version: 1.0.1  # Increment this
```

Then push:

```bash
lua push
```

### Requirements

- Must be in skill directory with `lua.skill.yaml`
- Must have valid API key (`lua auth configure`)
- Version must not already exist on server

## lua deploy

Deploy a specific version to production (all users).

```bash
lua deploy
```

### What It Does

<Steps>
  <Step title="Fetch Versions">
    Lists all pushed versions from server
  </Step>
  
  <Step title="Select Version">
    Choose which version to deploy
  </Step>
  
  <Step title="Confirm">
    Shows warning about production deployment
  </Step>
  
  <Step title="Deploy">
    Publishes selected version
  </Step>
  
  <Step title="Live!">
    Version is immediately available to all users
  </Step>
</Steps>

### Example

```bash
$ lua deploy
✅ Authenticated
🔄 Fetching available versions...

? Select a version to deploy:
  1.0.2 - Created: Oct 3, 2025 by you@example.com
  1.0.1 - Created: Oct 2, 2025 by you@example.com
❯ 1.0.0 (CURRENT) - Created: Oct 1, 2025 by you@example.com

? ⚠️  Warning: This version will be deployed to all users. Do you want to proceed? Yes
🔄 Publishing version...
✅ Version 1.0.0 deployed successfully
```

### Features

- Shows all available versions
- Indicates currently deployed version
- Requires explicit confirmation
- Immediate deployment (no rollback delay)

<Warning>
**Deployment is immediate!**

All users will get the new version right away. Test thoroughly with `lua chat` first!
</Warning>

## Complete Workflow

### New Project Workflow

```bash
# 1. Authenticate
lua auth configure

# 2. Initialize
mkdir my-skill && cd my-skill
lua init

# 3. Test
lua test

# 4. Push
lua push

# 5. Deploy
lua deploy
```

### Development Workflow

```bash
# Configure environment if needed
lua env sandbox        # Add new API keys locally
lua env production     # Update production env vars

# Make changes to src/tools/*.ts

# Test your agent
lua chat  # Choose sandbox mode

# Optional: Test specific tools
lua test  # For debugging individual tools

# When satisfied, push (direct mode - faster!)
lua push skill

# Update production persona if needed
lua persona production # Or: lua push persona

# Deploy to production
lua deploy
```

### Quick Fix Workflow

```bash
# 1. Edit file
vim src/tools/MyTool.ts

# 2. Test
lua test

# 3. Push and deploy (direct mode)
lua push skill
lua deploy
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="No lua.skill.yaml found">
    **Error**: `❌ No lua.skill.yaml found`
    
    **Solution**: Run command from skill directory or run `lua init` first
  </Accordion>

  <Accordion title="Version already exists">
    **Error**: `❌ Version 1.0.0 already exists on the server`
    
    **Solution**: Increment version in `lua.skill.yaml`:
    ```yaml
    skills:
      - version: 1.0.1  # Increment this
    ```
  </Accordion>

  <Accordion title="Compilation failed">
    **Error**: `❌ No index.ts found`
    
    **Solution**: Create `src/index.ts` with skill definition:
    ```typescript
    import { LuaSkill } from "lua-cli";
    const skill = new LuaSkill({...});
    ```
  </Accordion>

  <Accordion title="Tool validation error">
    **Error**: `❌ Tool name invalid`
    
    **Solution**: Tool names can only contain: `a-z`, `A-Z`, `0-9`, `-`, `_`
    ```typescript
    // ✅ Good
    name = "get_weather"
    
    // ❌ Bad
    name = "get weather"  // No spaces
    ```
  </Accordion>

  <Accordion title="Missing dependencies">
    **Error**: `❌ Cannot find module 'lua-cli'`
    
    **Solution**: Install dependencies:
    
    <CodeGroup>
    
    ```bash npm
    npm install
    ```
    
    ```bash yarn
    yarn install
    ```
    
    ```bash pnpm
    pnpm install
    ```
    
    </CodeGroup>
  </Accordion>
</AccordionGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Test Before Pushing">
    Always test locally first:
    ```bash
    lua test     # Test individual tools
    lua chat     # Test conversationally
    lua push     # Then push
    ```
  </Accordion>

  <Accordion title="Use Semantic Versioning">
    - **PATCH** (1.0.1): Bug fixes
    - **MINOR** (1.1.0): New features
    - **MAJOR** (2.0.0): Breaking changes
  </Accordion>

  <Accordion title="Test in Sandbox Before Deploy">
    ```bash
    lua push     # Upload version
    lua chat     # Test in sandbox
    # If good, then:
    lua deploy   # Deploy to production
    ```
  </Accordion>

  <Accordion title="Keep Version History">
    Don't delete old versions - they serve as rollback points
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Development Mode"
    icon="code"
    href="/cli/development"
  >
    Learn about live development with auto-reload
  </Card>
  <Card
    title="Build Your First Skill"
    icon="hammer"
    href="/getting-started/first-skill"
  >
    Follow a complete tutorial
  </Card>
</CardGroup>

